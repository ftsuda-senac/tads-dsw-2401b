<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <main>
            <h1>Incluir produto</h1>
            <form method="post" enctype="multipart/form-data" data-th-action="@{/produtos/incluir}" data-th-object="${produto}">
                <div>
                    <label for="txtNome">Nome</label>
                    <input type="text" id="txtNome" data-th-field="*{nome}"/>
                </div>
                <div>
                    <label for="txtPreco">Pre√ßo</label>
                    <input type="number" id="txtPreco" min="0" step="0.01"
                           data-th-field="*{preco}"/>
                </div>
                <div id="inputImagem">
                    <fieldset>
                        <input type="file" name="imagens[0].arquivo" multiple />
                        <div>
                            <label for="txtOrdenacao0">Ordem</label>
                            <input type="number" id="txtOrdenacao0" name="imagens[0].ordenacao" />
                        </div>
                        <div>
                            <input type="radio" name="imagens[0].principal" value="true" checked />
                        </div>
                    </fieldset>
                </div>
                <button type="button" id="btnNovaImagem">Incluir nova imagem</button>
                <button type="submit">Salvar</button>
            </form>
            <script>
                document.getElementById('btnNovaImagem').onclick = function() {
                    let qtdFieldset = document.querySelectorAll('#inputImagem > fieldset').length;
                    document.getElementById('inputImagem').insertAdjacentHTML('beforeend',
                    `
                    <fieldset>
                        <input type="file" name="imagens[${qtdFieldset}].arquivo" />
                        <div>
                            <label for="txtOrdenacao${qtdFieldset}">Ordem</label>
                            <input type="number" id="txtOrdenacao${qtdFieldset}" name="imagens[${qtdFieldset}].ordenacao" />
                        </div>
                        <div>
                            <input type="radio" name="imagens[${qtdFieldset}].principal" value="true" />
                        </div>
                    </fieldset>
                    `);
                }
            </script>
        </main>
    </body>
</html>
